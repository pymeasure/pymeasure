os:
  - linux
  - osx
language: python
matrix:
  allow_failures:
    - os: osx
env:
  matrix:
    - python=3.4  CONDA_PY=34
    - python=3.5  CONDA_PY=35

# command to install dependencies
install:
  - if [ ${TRAVIS_OS_NAME} == "osx" ]; then
        MINICONDA_OS="MacOSX"
    else
        MINICONDA_OS="Linux"
    fi
  - MINICONDA_URL="http://repo.continuum.io/miniconda"
  - MINICONDA_FILE="Miniconda3-latest-${MINICONDA_OS}-x86_64.sh"
  - wget "${MINICONDA_URL}/${MINICONDA_FILE}"
  - bash $MINICONDA_FILE-b -p $HOME/miniconda

  - export PATH=$HOME/miniconda/bin:$PATH

  - conda update --yes conda
  - conda install --yes pip
  - conda info -a
  - conda env create -f requirements/conda.yml
  - source activate pymeasure
  - python setup.py install

# command to run tests
script: py.test